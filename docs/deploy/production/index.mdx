---

sidebar_label: "Overview"
sidebar_position: 0

---

# Production Environments

Deploying Weaviate in a production environment requires careful planning to ensure stability, security, and performance.

**For production environments, Kubernetes is the ONLY supported deployment method.** Docker-compose and other methods are suitable only for testing and development.

Unlike development or testing environments, a production instance must be resilient, scalable, and optimized for real-world workloads.

## Key Aspects of a Production Environments

- **Scalability and Performance**
    - Production workloads demand high availability and low latency.
    - High availability requires a minimum 3-node cluster setup with replication factor of 3.
    - Memory requirements for HNSW index: 2 × numDimensions × numVectors × 4B (e.g., 100M vectors with 512 dimensions = ~400GiB).
    - CPU sizing formula: QPS × AverageCPULatencyPerQuery + 6 cores minimum.
    - Performance optimization through ASYNC_INDEXING, USE_BLOCKMAX_WAND for large hybrid searches, and ACORN HNSW index for filtered vector search.
    - Auto-scaling strategies and resource monitoring must be in place.
- **Data Resilience and Backups**
    - Data must be safeguarded against corruption and loss.
    - Use production backup modules: backup-s3, backup-gcs, backup-azure.
    - Alternative backup strategy: disk snapshots (LVM, VMDK, EBS snapshots).
    - Recommended backup retention: 7 daily, 4 weekly, 6 monthly backups.
    - Disaster recovery strategies and automated backups must be implemented.
    - Regular testing of recovery procedures is essential.
- **Security and Compliance**
    - Data at rest and in transit should be encrypted.
    - Compliance best practices must be followed.
- **Monitoring and Observability**
    - Integrate with Prometheus and Grafana for comprehensive monitoring.
    - Configure ServiceMonitor for Kubernetes environments.
    - Implement proper log management (LOG_LEVEL, LOG_FORMAT, QUERY_SLOW_LOG_ENABLED).
    - Enable performance profiling when needed (GO_PROFILING_DISABLE setting).
    - Logs and metrics must be collected for troubleshooting and optimization.
    - Monitoring tools should be used to track performance.
    - Alerting mechanisms must be set up to detect any anomalies or failures.
- **Networking and Access Control**
    - Privileges should be limited using RBAC (role-based access control).
    - Load balancing should be configured.

## Configuration Management

Proper configuration is critical for production deployments:

- **Memory Settings**
    - GOMEMLIMIT: Set memory limit for Go runtime, keep 10-20% headroom
    - LIMIT_RESOURCES: Uses 80% of total memory and all but one CPU core
    - PERSISTENCE_LSM_ACCESS_STRATEGY: Use 'mmap' by default, 'pread' for high memory load situations
    - GOGC: Controls garbage collector target percentage

- **Storage Requirements**
    - No NFS or NFS-like storage classes
    - Prefer SAN-based storage (EBS, VMDK, etc.)
    - Kubernetes cluster must support Persistent Volumes with Storage Class and Provisioner

- **Network Configuration**
    - REST API: port 8080 (HTTP)
    - gRPC: port 50051 (Protocol Buffer)
    - Gossip: port 7102 (cluster communication)
    - Data Bind: port 7103 (internal data exchange)

- **Schema Management**
    - Disable AUTOSCHEMA_ENABLED for production environments
    - Plan schema changes carefully to avoid performance impacts

## Resource Planning

Proper resource planning ensures optimal performance:

- **Memory Calculation**
    - HNSW index must fit in memory entirely
    - Formula: 2 × numDimensions × numVectors × 4B
    - Keep additional 20% for page cache and system overhead

- **Memory Reduction Strategies**
    - Use vector compression techniques
    - Reduce dimensionality with Principal Component Analysis (PCA)
    - Tune HNSW parameters: reduce maxConnections, increase ef and efConstruction

- **CPU Planning**
    - Consider query complexity: pure vector search (~3-4ms), filtered search (~10ms), hybrid search (~20ms)
    - Latency doubles approximately every 10x increase in vector count
    - Plan for peak load scenarios

- **Storage Planning**
    - Ensure adequate disk space for LSM segments and HNSW commit logs
    - Plan for compaction overhead and backup storage requirements

### Weaviate Production Environments
Weaviate has different options for deploying in a production environment using:

- **Serverless Cloud**: A Serverless Cloud instance is a robust cluster designed for production use.
- **Enterprise Cloud**: Enterprise Cloud is a fully-managed deployment of dedicated resources within a secure, highly available environment.
- **Bring Your Own Cloud (BYOC)**: Using your own cloud environment, you are able to have a fully managed deployment.

**Note**: All production deployment options require proper Kubernetes configuration regardless of the hosting method chosen.

## Questions and feedback

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>